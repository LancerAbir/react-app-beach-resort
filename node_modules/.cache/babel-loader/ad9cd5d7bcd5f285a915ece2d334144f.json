{"ast":null,"code":"import _objectSpread from \"/Users/lancer_abir/Desktop/react-app-beach-resort/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/lancer_abir/Desktop/react-app-beach-resort/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/lancer_abir/Desktop/react-app-beach-resort/src/Context.js\";\nimport React, { createContext, useState, useEffect } from 'react';\nimport items from './data';\nexport const RoomContext = createContext(); // Room Consumer\n\nconst RoomConsumer = RoomContext.Consumer;\nexport { RoomConsumer };\n\nconst RoomProvider = props => {\n  const _useState = useState({\n    rooms: [],\n    sortedRooms: [],\n    featuredRooms: [],\n    loading: true,\n    type: \"all\",\n    capacity: 1,\n    price: 0,\n    minPrice: 0,\n    maxPrice: 0,\n    minSize: 0,\n    maxSize: 0,\n    breakfast: false,\n    pets: false\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1];\n\n  const formatData = items => {\n    let tempItems = items.map(item => {\n      let id = item.sys.id;\n      let images = item.fields.images.map(image => image.fields.file.url);\n\n      let room = _objectSpread({}, item.fields, {\n        images,\n        id\n      });\n\n      return room;\n    });\n    return tempItems;\n  }; // GetData\n\n\n  useEffect(() => {\n    let rooms = formatData(items);\n    let featuredRooms = rooms.filter(room => room.featured === true);\n    let maxPrice = Math.max(...rooms.map(item => item.price));\n    let maxSize = Math.max(...rooms.map(item => item.size));\n    setValues({\n      rooms,\n      featuredRooms,\n      sortedRooms: rooms,\n      loading: false,\n      price: maxPrice,\n      maxPrice,\n      maxSize,\n      type: \"all\",\n      capacity: 1,\n      minPrice: 0,\n      minSize: 0,\n      breakfast: false,\n      pets: false\n    });\n  }, []); //Change Handler\n\n  const handleChange = event => {\n    const target = event.target;\n    const value = event.type === \"checkbox\" ? target.checked : target.value;\n    const name = event.target.name;\n    setValues({\n      [name]: value\n    }, filterRooms); // console.log(`this is type:${target}, this is name:${name}, this is value: ${value}`);\n  }; //filter Room\n\n\n  const filterRooms = () => {\n    let rooms = values.rooms,\n        type = values.type,\n        capacity = values.capacity,\n        price = values.price,\n        minSize = values.minSize,\n        maxSize = values.maxSize,\n        breakfast = values.breakfast,\n        pets = values.pets; // all the rooms\n\n    let tempRooms = [...rooms]; // transform value\n\n    capacity = parseInt(capacity); // filter by type\n\n    if (type !== \"all\") {\n      tempRooms = tempRooms.filter(room => room.type === type);\n    } // filter by capacity\n\n\n    if (capacity !== 1) {\n      tempRooms = tempRooms.filter(room => room.capacity >= capacity);\n    }\n\n    setValues({\n      sortedRooms: tempRooms\n    });\n  }; // getRoom function for pass data in singleRoom.js\n\n\n  const getRoom = slug => {\n    let tempRooms = [...values.rooms];\n    const room = tempRooms.find(room => room.slug === slug);\n    return room;\n  };\n\n  return React.createElement(RoomContext.Provider, {\n    value: _objectSpread({}, values, {\n      setValues,\n      getRoom: getRoom,\n      handleChange: handleChange\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, props.children);\n}; // Higher Order Component\n\n\nexport function withRoomConsumer(Component) {\n  return function ConsumerWrapper(props) {\n    return React.createElement(RoomConsumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, value => React.createElement(Component, Object.assign({}, props, {\n      context: value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })));\n  };\n}\nexport default RoomProvider;","map":{"version":3,"sources":["/Users/lancer_abir/Desktop/react-app-beach-resort/src/Context.js"],"names":["React","createContext","useState","useEffect","items","RoomContext","RoomConsumer","Consumer","RoomProvider","props","rooms","sortedRooms","featuredRooms","loading","type","capacity","price","minPrice","maxPrice","minSize","maxSize","breakfast","pets","values","setValues","formatData","tempItems","map","item","id","sys","images","fields","image","file","url","room","filter","featured","Math","max","size","handleChange","event","target","value","checked","name","filterRooms","tempRooms","parseInt","getRoom","slug","find","children","withRoomConsumer","Component","ConsumerWrapper"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport items from './data';\n\nexport const RoomContext = createContext();\n\n// Room Consumer\nconst RoomConsumer = RoomContext.Consumer;\nexport { RoomConsumer };\n\nconst RoomProvider = (props) => {\n\n    const [values, setValues] = useState(\n        {\n            rooms: [],\n            sortedRooms: [],\n            featuredRooms: [],\n            loading: true,\n            type: \"all\",\n            capacity: 1,\n            price: 0,\n            minPrice: 0,\n            maxPrice: 0,\n            minSize: 0,\n            maxSize: 0,\n            breakfast: false,\n            pets: false\n        }\n    )\n\n    const formatData = (items) => {\n        let tempItems = items.map(item => {\n            let id = item.sys.id\n            let images = item.fields.images.map(image => image.fields.file.url)\n            let room = { ...item.fields, images, id }\n            return room\n        })\n        return tempItems\n    }\n\n    // GetData\n    useEffect(() => {\n        let rooms = formatData(items);\n        let featuredRooms = rooms.filter(room => room.featured === true);\n        let maxPrice = Math.max(...rooms.map(item => item.price));\n        let maxSize = Math.max(...rooms.map(item => item.size));\n        setValues(\n            {\n                rooms,\n                featuredRooms,\n                sortedRooms: rooms,\n                loading: false,\n                price: maxPrice,\n                maxPrice,\n                maxSize,\n                type: \"all\",\n                capacity: 1,\n                minPrice: 0,\n                minSize: 0,\n                breakfast: false,\n                pets: false\n            }\n        );\n    }, [])\n\n    //Change Handler\n    const handleChange = (event) => {\n        const target = event.target;\n        const value = event.type === \"checkbox\" ? target.checked : target.value;\n        const name = event.target.name;\n        setValues(\n            {\n                [name]: value\n            },\n            filterRooms\n        );\n        // console.log(`this is type:${target}, this is name:${name}, this is value: ${value}`);\n    };\n\n    //filter Room\n    const filterRooms = () => {\n        let { rooms, type, capacity, price, minSize, maxSize, breakfast, pets } = values\n\n        // all the rooms\n        let tempRooms = [...rooms];\n\n        // transform value\n        capacity = parseInt(capacity)\n\n        // filter by type\n        if (type !== \"all\") {\n            tempRooms = tempRooms.filter(room => room.type === type)\n        }\n\n        // filter by capacity\n        if (capacity !== 1) {\n            tempRooms = tempRooms.filter(room => room.capacity >= capacity)\n        }\n\n        setValues({\n            sortedRooms: tempRooms\n        })\n    }\n\n    // getRoom function for pass data in singleRoom.js\n    const getRoom = (slug) => {\n        let tempRooms = [...values.rooms]\n        const room = tempRooms.find(room => room.slug === slug)\n        return room\n    }\n\n    return (\n        <RoomContext.Provider value={{ ...values, setValues, getRoom: getRoom, handleChange: handleChange }}>\n            {props.children}\n        </RoomContext.Provider>\n    );\n}\n\n\n// Higher Order Component\nexport function withRoomConsumer(Component) {\n    return function ConsumerWrapper(props) {\n        return (\n            <RoomConsumer>\n                {value => <Component {...props} context={value} />}\n            </RoomConsumer>\n        )\n    }\n}\n\nexport default RoomProvider;\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}